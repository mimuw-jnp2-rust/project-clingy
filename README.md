# clingy

## Authors
- Przemysław Kusiak (group 9)

## Description
Clingy is a simple linker that takes the ELF object files and creates ELF
executable.

## Changelog

#### 17.06.2022
 * Added `vec_map` crate and introduced `newtype` pattern to ensure type safety.

#### 09.06.2022
 * 1.4k SLOC reached.
 * Minimal working example: linking simple object files without shared
   dependencies, generated by NASM and GCC, into a static executable. Files are
   processed in parallel wherever possible.

#### 03.06.2022
 * 1k SLOC reached. Still not enough to show minimal working example.

## Demonstration

```
> nasm -w+all -f elf64 -o data_and_exit.o data_and_exit.asm
> nasm -w+all -f elf64 -o hello_world.o hello_world.asm
> target/debug/project-clingy hello_world.o data_and_exit.o output

[1/5] preprocessing files
[2/5] fixing layout
[3/5] gathering all symbols
[4/5] relocating
relocation:
    0x401010 (u64, absolute) inserted at:
    0x40000c (in output file: 0x100c)
relocation:
    0x401000 (i32, sign-extended absolute) inserted at:
    0x400017 (in output file: 0x1017)
relocation:
    0xe (i32, PC relative) inserted at:
    0x40001e (in output file: 0x101e)
[5/5] outputing

> ./output
Hello, cruel world!⏎
>
```

## Roadmap

#### 19.06.2022
 * `NOBITS` (`.bss`) support
 * All TODOs fixed. Error reporting improved. Refactoring so that the code looks
   nicer and is more idiomatic.
 * Tests.

#### 21.06.2022
 * CLI in `clamp`
 * Merging .symtabs from different files into one .symtab. (Binaries generated
   by clingy are stripped right now: we are not outputing .symtab. That has to
   be changed).

#### Probably can't make it by the end of the semester (but I plan to continue after the course;))
 * Support for static library archives (.a) and libc.
 * Generating .GOT and .PLT, linking with shared libraries, PIE support.
 * Slowly moving to a feature-complete linker: support for things like handling
   COMDAT sections for example.
 * Feature-complete linker: ability to link Chromium. Full-fledged support for
   linking scripts. More architectures. Simple LTOs like Mark&Sweep from entry
   symbol to remove unused sections.

